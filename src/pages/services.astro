---
import BaseLayout from '@layouts/BaseLayout.astro';
import ContactCTA from '@components/ContactCTA.astro';
import { getCollection } from 'astro:content';

const services = await getCollection('services');
const sortedServices = services.sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout
  title="Services"
  description="System integration, custom development, and data analytics solutions for enterprise businesses."
>
  <!-- Hero Section -->
  <section class="bg-white py-16">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl">
        <h1 class="font-heading text-4xl font-bold text-charcoal mb-6">
          Services Built for Real-World Complexity
        </h1>
        <p class="text-xl text-charcoal-light">
          We solve the technical challenges that prevent businesses from scaling: disconnected systems, manual workflows, and data trapped in silos.
        </p>
      </div>
    </div>
  </section>

  <!-- Services Content -->
  <section class="py-16">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto space-y-16">
        {sortedServices.map(async (service) => {
          const { Content } = await service.render();
          return (
            <div id={service.data.slug} class="scroll-mt-20">
              <article class="prose prose-lg max-w-none bg-slate-50 p-8 rounded-lg">
                <h2 class="font-heading text-3xl font-bold text-charcoal mb-6">
                  {service.data.title}
                </h2>
                <Content />
              </article>
            </div>
          );
        })}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16">
    <div class="container mx-auto px-6">
      <ContactCTA
        title="Let's Discuss Your Integration Needs"
        description="Schedule a technical consultation to explore how we can solve your specific challenges."
      />
    </div>
  </section>
</BaseLayout>

<style>
  .prose :global(h2) {
    @apply font-heading text-2xl font-bold text-charcoal mt-8 mb-4;
  }

  .prose :global(h3) {
    @apply font-heading text-xl font-semibold text-charcoal mt-6 mb-3;
  }

  .prose :global(p) {
    @apply text-charcoal-light mb-4;
  }

  .prose :global(ul) {
    @apply list-disc list-inside space-y-2 text-charcoal-light;
  }

  .prose :global(strong) {
    @apply text-charcoal font-semibold;
  }
</style>
